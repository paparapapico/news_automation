<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ NEWS AUTOMATION - ë¦´ìŠ¤ ìë™í™” ëŒ€ì‹œë³´ë“œ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #06b6d4;
            --dark: #1f2937;
            --light: #f8fafc;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            color: var(--dark);
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .main-container {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            margin: 20px;
            padding: 32px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            min-height: calc(100vh - 120px);
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 24px;
            color: white;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 8px 0;
        }

        .stat-label {
            color: #6b7280;
            font-weight: 500;
        }

        .btn-action {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
            color: white;
        }

        .btn-outline-custom {
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 12px;
            padding: 8px 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-outline-custom:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-1px);
        }

        .card-custom {
            background: white;
            border: none;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .card-header-custom {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 16px 24px;
            border: none;
            font-weight: 600;
        }

        .log-terminal {
            background: #1a1a1a;
            color: #00ff00;
            border-radius: 12px;
            padding: 20px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            border: 1px solid #333;
        }

        .log-terminal::-webkit-scrollbar {
            width: 8px;
        }

        .log-terminal::-webkit-scrollbar-track {
            background: #333;
            border-radius: 4px;
        }

        .log-terminal::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        .news-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .news-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .viral-badge {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .category-badge {
            background: linear-gradient(135deg, var(--info), var(--primary));
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .status-online { background: var(--success); }
        .status-warning { background: var(--warning); }
        .status-offline { background: var(--danger); }

        .nav-pills .nav-link {
            border-radius: 12px;
            margin: 0 4px;
            padding: 12px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-pills .nav-link.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .reel-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .reel-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .reel-video {
            width: 100%;
            height: 200px;
            object-fit: cover;
            cursor: pointer;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-spinner {
            background: white;
            padding: 40px;
            border-radius: 16px;
            text-align: center;
        }

        .progress-bar-custom {
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;"></div>
            <h5 id="loadingText">ì²˜ë¦¬ ì¤‘...</h5>
        </div>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4" href="#">
                <i class="fas fa-video text-primary me-2"></i>
                NEWS AUTOMATION
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text d-flex align-items-center">
                    <span id="statusDot" class="status-dot status-online"></span>
                    <span id="statusText">ì‹œìŠ¤í…œ ì •ìƒ</span>
                </span>
            </div>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="main-container">
        <!-- í—¤ë” -->
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold mb-3">
                <i class="fas fa-newspaper text-primary me-3"></i>
                AI ë‰´ìŠ¤ & ë¦´ìŠ¤ ìë™í™” ëŒ€ì‹œë³´ë“œ
            </h1>
            <p class="lead text-muted">ì‹¤ì‹œê°„ ë‰´ìŠ¤ ìˆ˜ì§‘ â†’ AI ë¦´ìŠ¤ ì œì‘ â†’ Instagram ìë™ ì—…ë¡œë“œ</p>
        </div>

        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="row g-4 mb-5">
            <div class="col-lg-3 col-md-6">
                <div class="stat-card fade-in">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--primary), var(--info));">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <div class="stat-number text-primary" id="totalNews">0</div>
                    <div class="stat-label">ìˆ˜ì§‘ëœ ë‰´ìŠ¤</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card fade-in">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--warning), var(--secondary));">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="stat-number text-warning" id="totalReels">0</div>
                    <div class="stat-label">ì œì‘ëœ ë¦´ìŠ¤</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card fade-in">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--success), var(--info));">
                        <i class="fas fa-upload"></i>
                    </div>
                    <div class="stat-number text-success" id="postedContent">0</div>
                    <div class="stat-label">ì—…ë¡œë“œ ì™„ë£Œ</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card fade-in">
                    <div class="stat-icon" style="background: linear-gradient(135deg, var(--danger), var(--warning));">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stat-number text-danger" id="avgViralScore">0.0</div>
                    <div class="stat-label">í‰ê·  ë°”ì´ëŸ´ ì ìˆ˜</div>
                </div>
            </div>
        </div>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <ul class="nav nav-pills justify-content-center mb-4" id="mainTabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="pill" href="#automationTab">
                    <i class="fas fa-robot me-2"></i>ìë™í™” ì‹¤í–‰
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="pill" href="#newsTab">
                    <i class="fas fa-newspaper me-2"></i>ë‰´ìŠ¤ ê´€ë¦¬
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="pill" href="#reelsTab">
                    <i class="fas fa-video me-2"></i>ë¦´ìŠ¤ ê´€ë¦¬
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="pill" href="#analyticsTab">
                    <i class="fas fa-chart-line me-2"></i>ì„±ê³¼ ë¶„ì„
                </a>
            </li>
        </ul>

        <!-- íƒ­ ì½˜í…ì¸  -->
        <div class="tab-content">
            <!-- ìë™í™” ì‹¤í–‰ íƒ­ -->
            <div class="tab-pane fade show active" id="automationTab">
                <div class="row g-4">
                    <!-- ì›í´ë¦­ ìë™í™” -->
                    <div class="col-lg-6">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-rocket me-2"></i>ì›í´ë¦­ ìë™í™”
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <p class="text-muted mb-4">ë‰´ìŠ¤ ìˆ˜ì§‘ë¶€í„° ë¦´ìŠ¤ ì œì‘, Instagram ì—…ë¡œë“œê¹Œì§€ ëª¨ë“  ê³¼ì •ì„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
                                <button class="btn btn-action btn-lg w-100" onclick="runFullAutomation()">
                                    <i class="fas fa-play me-2"></i>ì „ì²´ ìë™í™” ì‹¤í–‰
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ë‹¨ê³„ë³„ ì‹¤í–‰ -->
                    <div class="col-lg-6">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-list-ol me-2"></i>ë‹¨ê³„ë³„ ì‹¤í–‰
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-grid gap-3">
                                    <button class="btn btn-outline-custom" onclick="scrapeNews()">
                                        <i class="fas fa-search me-2"></i>1. ë‰´ìŠ¤ ìˆ˜ì§‘
                                    </button>
                                    <button class="btn btn-outline-custom" onclick="createReels()">
                                        <i class="fas fa-video me-2"></i>2. ë¦´ìŠ¤ ì œì‘
                                    </button>
                                    <button class="btn btn-outline-custom" onclick="uploadToInstagram()">
                                        <i class="fab fa-instagram me-2"></i>3. Instagram ì—…ë¡œë“œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì‹¤ì‹œê°„ ë¡œê·¸ -->
                    <div class="col-12">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-terminal me-2"></i>ì‹¤ì‹œê°„ ë¡œê·¸
                                </h5>
                            </div>
                            <div class="card-body p-0">
                                <div id="logTerminal" class="log-terminal">
[ì‹œìŠ¤í…œ] NEWS AUTOMATION ì‹œì‘ë¨
[ì •ë³´] ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ. ìë™í™”ë¥¼ ì‹œì‘í•˜ì„¸ìš”...

</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë‰´ìŠ¤ ê´€ë¦¬ íƒ­ -->
            <div class="tab-pane fade" id="newsTab">
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-fire me-2"></i>íŠ¸ë Œë”© ë‰´ìŠ¤
                                </h5>
                            </div>
                            <div class="card-body p-4" id="newsContainer">
                                <div class="text-center py-5">
                                    <div class="spinner-border text-primary mb-3"></div>
                                    <p class="text-muted">íŠ¸ë Œë”© ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-cog me-2"></i>ìˆ˜ì§‘ ì„¤ì •
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">ì¹´í…Œê³ ë¦¬</label>
                                    <select class="form-select" id="categorySelect">
                                        <option value="stock">ì£¼ì‹Â·ê²½ì œ</option>
                                        <option value="politics">ì •ì¹˜</option>
                                        <option value="international">í•´ì™¸ ì´ìŠˆ</option>
                                        <option value="domestic">êµ­ë‚´ ì´ìŠˆ</option>
                                        <option value="technology">ê¸°ìˆ Â·IT</option>
                                        <option value="entertainment">ì—°ì˜ˆÂ·ìŠ¤í¬ì¸ </option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="form-label fw-semibold">ìˆ˜ì§‘ ê°œìˆ˜</label>
                                    <input type="number" class="form-control" id="maxArticles" value="5" min="1" max="20">
                                </div>
                                <button class="btn btn-action w-100" onclick="scrapeCategoryNews()">
                                    <i class="fas fa-download me-2"></i>ë‰´ìŠ¤ ìˆ˜ì§‘ ì‹œì‘
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë¦´ìŠ¤ ê´€ë¦¬ íƒ­ -->
            <div class="tab-pane fade" id="reelsTab">
                <div class="card-custom">
                    <div class="card-header-custom">
                        <h5 class="mb-0">
                            <i class="fas fa-film me-2"></i>ìµœê·¼ ì œì‘ëœ ë¦´ìŠ¤
                        </h5>
                    </div>
                    <div class="card-body p-4" id="reelsContainer">
                        <div class="text-center py-5">
                            <div class="spinner-border text-warning mb-3"></div>
                            <p class="text-muted">ë¦´ìŠ¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì„±ê³¼ ë¶„ì„ íƒ­ -->
            <div class="tab-pane fade" id="analyticsTab">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-chart-bar me-2"></i>ì£¼ê°„ ì„±ê³¼
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <canvas id="weeklyChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-trophy me-2"></i>ì„±ê³¼ ìš”ì•½
                                </h5>
                            </div>
                            <div class="card-body p-4" id="performanceSummary">
                                <div class="text-center py-3">
                                    <div class="spinner-border text-info mb-3"></div>
                                    <p class="text-muted">ì„±ê³¼ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” ì¤‘...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card-custom">
                            <div class="card-header-custom">
                                <h5 class="mb-0">
                                    <i class="fas fa-tools me-2"></i>ì‹œìŠ¤í…œ ê´€ë¦¬
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="row g-3">
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-custom w-100" onclick="testInstagram()">
                                            <i class="fab fa-instagram me-2"></i>Instagram í…ŒìŠ¤íŠ¸
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-custom w-100" onclick="cleanupFiles()">
                                            <i class="fas fa-broom me-2"></i>íŒŒì¼ ì •ë¦¬
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-custom w-100" onclick="refreshData()">
                                            <i class="fas fa-sync me-2"></i>ë°ì´í„° ìƒˆë¡œê³ ì¹¨
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-custom w-100" onclick="clearAllData()">
                                            <i class="fas fa-trash me-2"></i>ë°ì´í„° ì´ˆê¸°í™”
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ë“¤ -->
    <!-- ë‰´ìŠ¤ ìƒì„¸ ëª¨ë‹¬ -->
    <div class="modal fade" id="newsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="border-radius: 16px;">
                <div class="modal-header" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border-radius: 16px 16px 0 0;">
                    <h5 class="modal-title">ë‰´ìŠ¤ ìƒì„¸ ì •ë³´</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4" id="newsModalBody">
                    <!-- ë‰´ìŠ¤ ìƒì„¸ ë‚´ìš© -->
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-outline-custom" data-bs-dismiss="modal">ë‹«ê¸°</button>
                    <button type="button" class="btn btn-action" onclick="createReelFromNews()">
                        <i class="fas fa-video me-2"></i>ë¦´ìŠ¤ ì œì‘
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¦´ìŠ¤ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ -->
    <div class="modal fade" id="reelModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="border-radius: 16px;">
                <div class="modal-header" style="background: linear-gradient(135deg, var(--warning), var(--secondary)); color: white; border-radius: 16px 16px 0 0;">
                    <h5 class="modal-title">ë¦´ìŠ¤ ë¯¸ë¦¬ë³´ê¸°</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center p-4" id="reelModalBody">
                    <!-- ë¦´ìŠ¤ ë¯¸ë¦¬ë³´ê¸° -->
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-outline-custom" data-bs-dismiss="modal">ë‹«ê¸°</button>
                    <button type="button" class="btn btn-action" onclick="uploadReelToInstagram()">
                        <i class="fab fa-instagram me-2"></i>Instagram ì—…ë¡œë“œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentNewsId = null;
        let currentReelId = null;
        let weeklyChart = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadSystemStatus();
            loadTrendingNews();
            loadRecentReels();
            loadPerformanceAnalytics();
            
            // 5ì´ˆë§ˆë‹¤ ì‹œìŠ¤í…œ ìƒíƒœ ì—…ë°ì´íŠ¸
            setInterval(loadSystemStatus, 5000);
        });

        // ë¡œê·¸ ì¶”ê°€ í•¨ìˆ˜
        function addLog(message, type = 'info') {
            const terminal = document.getElementById('logTerminal');
            const timestamp = new Date().toLocaleTimeString();
            
            let icon = 'â„¹ï¸';
            let color = '#00ff00';
            
            if (type === 'error') {
                icon = 'âŒ';
                color = '#ff4444';
            } else if (type === 'success') {
                icon = 'âœ…';
                color = '#00ff88';
            } else if (type === 'warning') {
                icon = 'âš ï¸';
                color = '#ffaa00';
            }
            
            const logEntry = `[${timestamp}] ${icon} ${message}\n`;
            terminal.innerHTML += logEntry;
            terminal.scrollTop = terminal.scrollHeight;
        }

        // ë¡œë”© í‘œì‹œ
        function showLoading(text = 'ì²˜ë¦¬ ì¤‘...') {
            document.getElementById('loadingText').textContent = text;
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        // ì‹œìŠ¤í…œ ìƒíƒœ ë¡œë“œ
        async function loadSystemStatus() {
            try {
                const response = await fetch('/health');
                const data = await response.json();
                
                if (data.status === 'healthy') {
                    updateStatusIndicator('online', 'ì‹œìŠ¤í…œ ì •ìƒ');
                    updateStatistics(data.statistics);
                } else {
                    updateStatusIndicator('offline', 'ì‹œìŠ¤í…œ ì˜¤ë¥˜');
                }
            } catch (error) {
                updateStatusIndicator('warning', 'ì—°ê²° ì˜¤ë¥˜');
                console.error('ì‹œìŠ¤í…œ ìƒíƒœ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ìƒíƒœ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
        function updateStatusIndicator(status, text) {
            const dot = document.getElementById('statusDot');
            const textEl = document.getElementById('statusText');
            
            dot.className = `status-dot status-${status}`;
            textEl.textContent = text;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStatistics(stats) {
            document.getElementById('totalNews').textContent = stats.total_news || 0;
            document.getElementById('totalReels').textContent = stats.total_reels || 0;
            document.getElementById('postedContent').textContent = stats.posted_content || 0;
            document.getElementById('avgViralScore').textContent = (stats.avg_viral_score || 0).toFixed(1);
        }

        // ì „ì²´ ìë™í™” ì‹¤í–‰
        async function runFullAutomation() {
            showLoading('ì „ì²´ ìë™í™” ì‹¤í–‰ ì¤‘...');
            addLog('ğŸš€ ì „ì²´ ìë™í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            
            try {
                const response = await fetch('/api/automation/full-reel-process', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… ìë™í™” ì™„ë£Œ! ë‰´ìŠ¤ ${data.results.scraped_news}ê°œ, ë¦´ìŠ¤ ${data.results.created_reels}ê°œ, ì—…ë¡œë“œ ${data.results.posted_reels}ê°œ`, 'success');
                    
                    if (data.results.errors && data.results.errors.length > 0) {
                        data.results.errors.forEach(error => {
                            addLog(`âš ï¸ ${error}`, 'warning');
                        });
                    }
                    
                    refreshAllData();
                } else {
                    addLog(`âŒ ìë™í™” ì‹¤íŒ¨: ${data.error}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ ìë™í™” ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ë‰´ìŠ¤ ìˆ˜ì§‘
        async function scrapeNews() {
            showLoading('ë‰´ìŠ¤ ìˆ˜ì§‘ ì¤‘...');
            addLog('ğŸ“° ë‰´ìŠ¤ ìˆ˜ì§‘ì„ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            
            try {
                const categories = ['stock', 'politics', 'international', 'domestic', 'technology', 'entertainment'];
                let totalNews = 0;
                
                for (const category of categories) {
                    const response = await fetch('/api/scrape-news', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ category: category, max_articles: 3 })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        totalNews += data.news.length;
                        addLog(`âœ… ${getCategoryName(category)}: ${data.news.length}ê°œ ë‰´ìŠ¤ ìˆ˜ì§‘`, 'success');
                    } else {
                        addLog(`âš ï¸ ${getCategoryName(category)} ìˆ˜ì§‘ ì‹¤íŒ¨: ${data.message}`, 'warning');
                    }
                }
                
                hideLoading();
                addLog(`ğŸ“Š ì´ ${totalNews}ê°œì˜ ìƒˆë¡œìš´ ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤`, 'success');
                refreshAllData();
                
            } catch (error) {
                hideLoading();
                addLog(`âŒ ë‰´ìŠ¤ ìˆ˜ì§‘ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ì¹´í…Œê³ ë¦¬ë³„ ë‰´ìŠ¤ ìˆ˜ì§‘
        async function scrapeCategoryNews() {
            const category = document.getElementById('categorySelect').value;
            const maxArticles = document.getElementById('maxArticles').value;
            
            showLoading(`${getCategoryName(category)} ë‰´ìŠ¤ ìˆ˜ì§‘ ì¤‘...`);
            addLog(`ğŸ“° ${getCategoryName(category)} ì¹´í…Œê³ ë¦¬ì—ì„œ ${maxArticles}ê°œ ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤...`, 'info');
            
            try {
                const response = await fetch('/api/scrape-news', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        category: category,
                        max_articles: parseInt(maxArticles)
                    })
                });
                
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… ${data.news.length}ê°œ ë‰´ìŠ¤ ìˆ˜ì§‘ ì™„ë£Œ (ìµœê³  ë°”ì´ëŸ´ ì ìˆ˜: ${data.highest_viral_score || 0})`, 'success');
                    refreshAllData();
                } else {
                    addLog(`âŒ ë‰´ìŠ¤ ìˆ˜ì§‘ ì‹¤íŒ¨: ${data.message}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ ë‰´ìŠ¤ ìˆ˜ì§‘ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ë¦´ìŠ¤ ì œì‘
        async function createReels() {
            showLoading('ë¦´ìŠ¤ ì œì‘ ì¤‘...');
            addLog('ğŸ¬ ê³  ë°”ì´ëŸ´ ì ìˆ˜ ë‰´ìŠ¤ë¡œ ë¦´ìŠ¤ë¥¼ ì œì‘í•©ë‹ˆë‹¤...', 'info');
            
            try {
                const newsResponse = await fetch('/api/news/trending?limit=3');
                const newsData = await newsResponse.json();
                
                if (!newsData.success || newsData.trending_news.length === 0) {
                    hideLoading();
                    addLog('âŒ ë¦´ìŠ¤ ì œì‘í•  ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
                    return;
                }
                
                let createdReels = 0;
                
                for (const news of newsData.trending_news) {
                    try {
                        addLog(`ğŸ¬ "${news.title.substring(0, 30)}..." ë¦´ìŠ¤ ì œì‘ ì¤‘...`, 'info');
                        
                        const reelResponse = await fetch(`/api/create-reel/${news.id}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                news_id: news.id,
                                video_style: 'trending',
                                duration: 15,
                                voice_speed: 1.2,
                                include_captions: true,
                                background_music: false
                            })
                        });
                        
                        const reelData = await reelResponse.json();
                        
                        if (reelData.success) {
                            createdReels++;
                            addLog(`âœ… ë¦´ìŠ¤ ì œì‘ ì™„ë£Œ (${reelData.file_size_mb}MB)`, 'success');
                        } else {
                            addLog(`âŒ ë¦´ìŠ¤ ì œì‘ ì‹¤íŒ¨: ${reelData.message}`, 'error');
                        }
                        
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        
                    } catch (error) {
                        addLog(`âŒ ë¦´ìŠ¤ ì œì‘ ì˜¤ë¥˜: ${error.message}`, 'error');
                    }
                }
                
                hideLoading();
                addLog(`ğŸ¬ ì´ ${createdReels}ê°œì˜ ë¦´ìŠ¤ë¥¼ ì œì‘í–ˆìŠµë‹ˆë‹¤`, 'success');
                refreshAllData();
                
            } catch (error) {
                hideLoading();
                addLog(`âŒ ë¦´ìŠ¤ ì œì‘ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // Instagram ì—…ë¡œë“œ
        async function uploadToInstagram() {
            showLoading('Instagram ì—…ë¡œë“œ ì¤‘...');
            addLog('ğŸ“± ìµœê·¼ ë¦´ìŠ¤ë¥¼ Instagramì— ì—…ë¡œë“œí•©ë‹ˆë‹¤...', 'info');
            
            try {
                const reelsResponse = await fetch('/api/reels/recent?limit=3');
                const reelsData = await reelsResponse.json();
                
                if (!reelsData.success || reelsData.reels.length === 0) {
                    hideLoading();
                    addLog('âŒ ì—…ë¡œë“œí•  ë¦´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
                    return;
                }
                
                let uploadedReels = 0;
                
                for (const reel of reelsData.reels) {
                    try {
                        addLog(`ğŸ“± ë¦´ìŠ¤ ID ${reel.id} Instagram ì—…ë¡œë“œ ì¤‘...`, 'info');
                        
                        const uploadResponse = await fetch(`/api/post-reel-to-instagram/${reel.id}`, {
                            method: 'POST'
                        });
                        
                        const uploadData = await uploadResponse.json();
                        
                        if (uploadData.success) {
                            uploadedReels++;
                            addLog(`âœ… Instagram ì—…ë¡œë“œ ì™„ë£Œ! Post ID: ${uploadData.post_id}`, 'success');
                        } else {
                            addLog(`âŒ Instagram ì—…ë¡œë“œ ì‹¤íŒ¨: ${uploadData.message}`, 'error');
                        }
                        
                        await new Promise(resolve => setTimeout(resolve, 10000));
                        
                    } catch (error) {
                        addLog(`âŒ Instagram ì—…ë¡œë“œ ì˜¤ë¥˜: ${error.message}`, 'error');
                    }
                }
                
                hideLoading();
                addLog(`ğŸ“± ì´ ${uploadedReels}ê°œì˜ ë¦´ìŠ¤ë¥¼ Instagramì— ì—…ë¡œë“œí–ˆìŠµë‹ˆë‹¤`, 'success');
                refreshAllData();
                
            } catch (error) {
                hideLoading();
                addLog(`âŒ Instagram ì—…ë¡œë“œ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // íŠ¸ë Œë”© ë‰´ìŠ¤ ë¡œë“œ
        async function loadTrendingNews() {
            try {
                const response = await fetch('/api/news/trending?limit=10');
                const data = await response.json();
                
                const container = document.getElementById('newsContainer');
                
                if (data.success && data.trending_news.length > 0) {
                    container.innerHTML = data.trending_news.map(news => `
                        <div class="news-item fade-in" onclick="showNewsDetail(${news.id}, '${escapeHtml(news.title)}', '${escapeHtml(news.summary)}', '${news.category}', ${news.viral_score})">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="mb-1 flex-grow-1">${news.title}</h6>
                                <span class="viral-badge ms-2">${news.viral_score}</span>
                            </div>
                            <p class="text-muted mb-2">${news.summary}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="category-badge">${getCategoryName(news.category)}</span>
                                <small class="text-muted">${formatDateTime(news.scraped_at)}</small>
                            </div>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = `
                        <div class="text-center py-5">
                            <i class="fas fa-newspaper fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">íŠ¸ë Œë”© ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                            <p class="text-muted">ë‰´ìŠ¤ ìˆ˜ì§‘ì„ ë¨¼ì € ì‹¤í–‰í•´ì£¼ì„¸ìš”.</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('íŠ¸ë Œë”© ë‰´ìŠ¤ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ìµœê·¼ ë¦´ìŠ¤ ë¡œë“œ
        async function loadRecentReels() {
            try {
                const response = await fetch('/api/reels/recent?limit=12');
                const data = await response.json();
                
                const container = document.getElementById('reelsContainer');
                
                if (data.success && data.reels.length > 0) {
                    container.innerHTML = `
                        <div class="row g-4">
                            ${data.reels.map(reel => `
                                <div class="col-lg-4 col-md-6">
                                    <div class="reel-card fade-in">
                                        <video class="reel-video" 
                                               onclick="showReelDetail(${reel.id}, '${reel.video_url}', '${escapeHtml(reel.news_title)}', '${reel.style}', ${reel.duration})"
                                               poster="${reel.video_url}">
                                            <source src="${reel.video_url}" type="video/mp4">
                                        </video>
                                        <div class="p-3">
                                            <h6 class="mb-2">${reel.news_title.substring(0, 50)}...</h6>
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <span class="badge bg-warning">${reel.style}</span>
                                                <small class="text-muted">${reel.duration}ì´ˆ</small>
                                            </div>
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <small class="text-muted">${reel.file_size_mb} MB</small>
                                                <small class="text-muted">${formatDateTime(reel.created_at)}</small>
                                            </div>
                                            <button class="btn btn-action btn-sm w-100" onclick="uploadSingleReel(${reel.id})">
                                                <i class="fab fa-instagram me-2"></i>Instagram ì—…ë¡œë“œ
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="text-center py-5">
                            <i class="fas fa-video fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">ì œì‘ëœ ë¦´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                            <p class="text-muted">ë¦´ìŠ¤ ì œì‘ì„ ë¨¼ì € ì‹¤í–‰í•´ì£¼ì„¸ìš”.</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('ë¦´ìŠ¤ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ì„±ê³¼ ë¶„ì„ ë¡œë“œ
        async function loadPerformanceAnalytics() {
            try {
                const response = await fetch('/api/analytics/performance');
                const data = await response.json();
                
                if (data.success) {
                    updatePerformanceSummary(data.analytics);
                    createWeeklyChart(data.analytics.weekly_stats);
                }
            } catch (error) {
                console.error('ì„±ê³¼ ë¶„ì„ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ì„±ê³¼ ìš”ì•½ ì—…ë°ì´íŠ¸
        function updatePerformanceSummary(analytics) {
            const container = document.getElementById('performanceSummary');
            container.innerHTML = `
                <div class="row g-3 text-center">
                    <div class="col-6">
                        <h3 class="text-primary mb-1">${analytics.weekly_stats.news_collected}</h3>
                        <p class="text-muted mb-0">ì£¼ê°„ ë‰´ìŠ¤ ìˆ˜ì§‘</p>
                    </div>
                    <div class="col-6">
                        <h3 class="text-warning mb-1">${analytics.weekly_stats.reels_created}</h3>
                        <p class="text-muted mb-0">ì£¼ê°„ ë¦´ìŠ¤ ì œì‘</p>
                    </div>
                    <div class="col-6">
                        <h3 class="text-success mb-1">${analytics.weekly_stats.posts_published}</h3>
                        <p class="text-muted mb-0">ì£¼ê°„ ê²Œì‹œë¬¼ ë°œí–‰</p>
                    </div>
                    <div class="col-6">
                        <h3 class="text-danger mb-1">${analytics.weekly_stats.success_rate}%</h3>
                        <p class="text-muted mb-0">ì„±ê³µë¥ </p>
                    </div>
                </div>
                <hr class="my-4">
                <div>
                    <h6 class="mb-3">
                        <i class="fas fa-trophy text-warning me-2"></i>ìµœê³  ì„±ê³¼ ì¹´í…Œê³ ë¦¬
                    </h6>
                    <div class="d-flex flex-wrap gap-2">
                        ${analytics.top_categories.map(category => `
                            <span class="badge bg-primary">${getCategoryName(category)}</span>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // ì£¼ê°„ ì°¨íŠ¸ ìƒì„±
        function createWeeklyChart(weeklyStats) {
            const ctx = document.getElementById('weeklyChart').getContext('2d');
            
            if (weeklyChart) {
                weeklyChart.destroy();
            }
            
            weeklyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ë‰´ìŠ¤ ìˆ˜ì§‘', 'ë¦´ìŠ¤ ì œì‘', 'ê²Œì‹œë¬¼ ë°œí–‰'],
                    datasets: [{
                        label: 'ì£¼ê°„ ì„±ê³¼',
                        data: [
                            weeklyStats.news_collected,
                            weeklyStats.reels_created,
                            weeklyStats.posts_published
                        ],
                        backgroundColor: [
                            'rgba(99, 102, 241, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(16, 185, 129, 0.8)'
                        ],
                        borderColor: [
                            'rgb(99, 102, 241)',
                            'rgb(245, 158, 11)',
                            'rgb(16, 185, 129)'
                        ],
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // ë‰´ìŠ¤ ìƒì„¸ ë³´ê¸°
        function showNewsDetail(id, title, summary, category, viralScore) {
            currentNewsId = id;
            
            document.getElementById('newsModalBody').innerHTML = `
                <div class="mb-4">
                    <h5 class="mb-3">${title}</h5>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="category-badge">${getCategoryName(category)}</span>
                        <span class="viral-badge">ë°”ì´ëŸ´ ì ìˆ˜: ${viralScore}</span>
                    </div>
                    <p class="text-muted mb-4">${summary}</p>
                    <div class="alert alert-info border-0" style="background: rgba(99, 102, 241, 0.1);">
                        <i class="fas fa-info-circle text-primary me-2"></i>
                        ì´ ë‰´ìŠ¤ë¡œ ë¦´ìŠ¤ë¥¼ ì œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
                    </div>
                </div>
            `;
            
            new bootstrap.Modal(document.getElementById('newsModal')).show();
        }

        // ë¦´ìŠ¤ ìƒì„¸ ë³´ê¸°
        function showReelDetail(id, videoUrl, title, style, duration) {
            currentReelId = id;
            
            document.getElementById('reelModalBody').innerHTML = `
                <div class="mb-4">
                    <h5 class="mb-3">${title}</h5>
                    <div class="mb-3">
                        <span class="badge bg-warning me-2">${style}</span>
                        <span class="badge bg-info">${duration}ì´ˆ</span>
                    </div>
                    <video controls class="w-100 rounded-3" style="max-height: 400px;">
                        <source src="${videoUrl}" type="video/mp4">
                        ë¸Œë¼ìš°ì €ê°€ ë¹„ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </video>
                    <div class="mt-3">
                        <div class="alert alert-success border-0" style="background: rgba(16, 185, 129, 0.1);">
                            <i class="fab fa-instagram text-success me-2"></i>
                            ì´ ë¦´ìŠ¤ë¥¼ Instagramì— ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
                        </div>
                    </div>
                </div>
            `;
            
            new bootstrap.Modal(document.getElementById('reelModal')).show();
        }

        // ë‰´ìŠ¤ì—ì„œ ë¦´ìŠ¤ ì œì‘
        async function createReelFromNews() {
            if (!currentNewsId) return;
            
            bootstrap.Modal.getInstance(document.getElementById('newsModal')).hide();
            showLoading('ë¦´ìŠ¤ ì œì‘ ì¤‘...');
            addLog(`ğŸ¬ ë‰´ìŠ¤ ID ${currentNewsId}ë¡œ ë¦´ìŠ¤ë¥¼ ì œì‘í•©ë‹ˆë‹¤...`, 'info');
            
            try {
                const response = await fetch(`/api/create-reel/${currentNewsId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        news_id: currentNewsId,
                        video_style: 'trending',
                        duration: 15,
                        voice_speed: 1.2,
                        include_captions: true,
                        background_music: false
                    })
                });
                
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… ë¦´ìŠ¤ ì œì‘ ì™„ë£Œ! (${data.file_size_mb}MB)`, 'success');
                    refreshAllData();
                } else {
                    addLog(`âŒ ë¦´ìŠ¤ ì œì‘ ì‹¤íŒ¨: ${data.message}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ ë¦´ìŠ¤ ì œì‘ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ë¦´ìŠ¤ Instagram ì—…ë¡œë“œ
        async function uploadReelToInstagram() {
            if (!currentReelId) return;
            
            bootstrap.Modal.getInstance(document.getElementById('reelModal')).hide();
            showLoading('Instagram ì—…ë¡œë“œ ì¤‘...');
            addLog(`ğŸ“± ë¦´ìŠ¤ ID ${currentReelId}ë¥¼ Instagramì— ì—…ë¡œë“œí•©ë‹ˆë‹¤...`, 'info');
            
            try {
                const response = await fetch(`/api/post-reel-to-instagram/${currentReelId}`, {
                    method: 'POST'
                });
                
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… Instagram ì—…ë¡œë“œ ì™„ë£Œ! Post ID: ${data.post_id}`, 'success');
                    if (data.instagram_url) {
                        addLog(`ğŸ”— Instagram URL: ${data.instagram_url}`, 'info');
                    }
                    refreshAllData();
                } else {
                    addLog(`âŒ Instagram ì—…ë¡œë“œ ì‹¤íŒ¨: ${data.message}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ Instagram ì—…ë¡œë“œ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ê°œë³„ ë¦´ìŠ¤ ì—…ë¡œë“œ
        async function uploadSingleReel(reelId) {
            showLoading('Instagram ì—…ë¡œë“œ ì¤‘...');
            addLog(`ğŸ“± ë¦´ìŠ¤ ID ${reelId}ë¥¼ Instagramì— ì—…ë¡œë“œí•©ë‹ˆë‹¤...`, 'info');
            
            try {
                const response = await fetch(`/api/post-reel-to-instagram/${reelId}`, {
                    method: 'POST'
                });
                
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… Instagram ì—…ë¡œë“œ ì™„ë£Œ! Post ID: ${data.post_id}`, 'success');
                    refreshAllData();
                } else {
                    addLog(`âŒ Instagram ì—…ë¡œë“œ ì‹¤íŒ¨: ${data.message}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ Instagram ì—…ë¡œë“œ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // Instagram ì—°ê²° í…ŒìŠ¤íŠ¸
        async function testInstagram() {
            showLoading('Instagram ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...');
            addLog('ğŸ“± Instagram ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤...', 'info');
            
            try {
                const response = await fetch('/api/test-instagram');
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… Instagram ì—°ê²° ì„±ê³µ: ${data.message}`, 'success');
                } else {
                    addLog(`âŒ Instagram ì—°ê²° ì‹¤íŒ¨: ${data.error}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ Instagram í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // íŒŒì¼ ì •ë¦¬
        async function cleanupFiles() {
            if (!confirm('7ì¼ ì´ìƒ ëœ ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            showLoading('íŒŒì¼ ì •ë¦¬ ì¤‘...');
            addLog('ğŸ§¹ ì˜¤ë˜ëœ íŒŒì¼ì„ ì •ë¦¬í•©ë‹ˆë‹¤...', 'info');
            
            try {
                const response = await fetch('/api/cleanup/old-files', { method: 'DELETE' });
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog(`âœ… ${data.cleaned_files}ê°œ íŒŒì¼ì´ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
                    refreshAllData();
                } else {
                    addLog(`âŒ íŒŒì¼ ì •ë¦¬ ì‹¤íŒ¨: ${data.error}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ íŒŒì¼ ì •ë¦¬ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ë°ì´í„° ìƒˆë¡œê³ ì¹¨
        function refreshData() {
            addLog('ğŸ”„ ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤...', 'info');
            refreshAllData();
        }

        // ëª¨ë“  ë°ì´í„° ì´ˆê¸°í™”
        async function clearAllData() {
            if (!confirm('ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) return;
            
            showLoading('ë°ì´í„° ì´ˆê¸°í™” ì¤‘...');
            addLog('ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤...', 'info');
            
            try {
                const response = await fetch('/api/clear-data', { method: 'DELETE' });
                const data = await response.json();
                hideLoading();
                
                if (data.success) {
                    addLog('âœ… ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    refreshAllData();
                } else {
                    addLog(`âŒ ë°ì´í„° ì‚­ì œ ì‹¤íŒ¨: ${data.error}`, 'error');
                }
            } catch (error) {
                hideLoading();
                addLog(`âŒ ë°ì´í„° ì‚­ì œ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ëª¨ë“  ë°ì´í„° ìƒˆë¡œê³ ì¹¨
        function refreshAllData() {
            loadSystemStatus();
            loadTrendingNews();
            loadRecentReels();
            loadPerformanceAnalytics();
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getCategoryName(category) {
            const categoryNames = {
                'stock': 'ì£¼ì‹Â·ê²½ì œ',
                'politics': 'ì •ì¹˜',
                'international': 'í•´ì™¸ ì´ìŠˆ',
                'domestic': 'êµ­ë‚´ ì´ìŠˆ',
                'technology': 'ê¸°ìˆ Â·IT',
                'entertainment': 'ì—°ì˜ˆÂ·ìŠ¤í¬ì¸ '
            };
            return categoryNames[category] || category;
        }

        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('ko-KR', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, function(m) { return map[m]; });
        }

        // íƒ­ ì „í™˜ ì´ë²¤íŠ¸
        document.addEventListener('shown.bs.tab', function (e) {
            const target = e.target.getAttribute('href');
            
            if (target === '#newsTab') {
                loadTrendingNews();
            } else if (target === '#reelsTab') {
                loadRecentReels();
            } else if (target === '#analyticsTab') {
                loadPerformanceAnalytics();
            }
        });
    </script>
</body>
</html>